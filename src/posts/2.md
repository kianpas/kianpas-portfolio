---
title: 'Spring Batch ì‹¤ë¬´ ì ìš©ê¸°: 2PC, ë¶„ê¸° ì‹¤í–‰, íŠ¸ëžœìž­ì…˜ ì²˜ë¦¬ê¹Œì§€'
date: '2025-07-17'
author: 'kianpas'
summary: 'ëŒ€ìš©ëŸ‰ ë°°ì¹˜ ì²˜ë¦¬ì™€ íŠ¸ëžœìž­ì…˜ ë¶„ë¦¬, 2ë‹¨ê³„ ì»¤ë°‹ ì ìš© ë“± ì‹¤ë¬´ì—ì„œ ë§ˆì£¼ì¹œ ë°°ì¹˜ ê´€ë ¨ ì´ìŠˆë¥¼ í•´ê²°í•œ ì‚¬ë¡€ë¥¼ ê³µìœ í•©ë‹ˆë‹¤.'
tags: ['Spring Batch', '2PC', 'Transactional', 'Job', 'Tasklet']
category: 'backend'
---

## ðŸ“¦ ëŒ€ìš©ëŸ‰ ë°°ì¹˜ì™€ íŠ¸ëžœìž­ì…˜, ì‹¤ë¬´ì—ì„œëŠ” ì´ë ‡ê²Œ í–ˆìŠµë‹ˆë‹¤

### ðŸ” ì„œë¡œ ë‹¤ë¥¸ DBì— ë°ì´í„° ì—…ë°ì´íŠ¸í•  ë•Œ 2PC ì ìš©

- **ë¬¸ì œ**: í•œ Jobì—ì„œ ë‘ ê°œì˜ DBì— ë°ì´í„°ë¥¼ ê°ê° ì“°ê³  ëª¨ë‘ ì„±ê³µí•´ì•¼ í•  ê²½ìš°, ë‹¨ì¼ íŠ¸ëžœìž­ì…˜ìœ¼ë¡œëŠ” ì–´ë ¤ì›€
- **í•´ê²°**: JTA ê¸°ë°˜ì˜ 2PC(2ë‹¨ê³„ ì»¤ë°‹) ì ìš©


### âž• Taskletì„ ë‚˜ëˆ„ê³  ìƒíƒœ ê³µìœ í•˜ê¸°

- ì—¬ëŸ¬ Stepì—ì„œ ë°ì´í„°ë¥¼ ê³µìœ í•´ì•¼ í•  ë•Œ `ExecutionContext`ë¥¼ í†µí•´ ê³µìœ 

```java
stepBuilderFactory.get("stepA")
  .tasklet((contribution, chunkContext) -> {
      chunkContext.getStepContext().getStepExecution()
          .getExecutionContext().put("key", "value");
      return RepeatStatus.FINISHED;
  });