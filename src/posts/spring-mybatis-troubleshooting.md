---
title: 'μ‹¤λ¬΄μ—μ„ μμ£Ό λ§μ£ΌμΉλ” Springκ³Ό MyBatis νΈλ¬λΈ”μν…'
date: '2025-07-16'
author: 'kianpas'
summary: 'MyBatisμ foreach μ²λ¦¬, AES μ•”νΈν™” μΏΌλ¦¬, λ‹¤μ¤‘ λ¦¬μ¤νΈ νλΌλ―Έν„° μ²λ¦¬ λ“± μ‹¤λ¬΄μ—μ„ μμ£Ό κ²μ€ λ¬Έμ μ™€ ν•΄κ²° λ°©λ²•μ„ μ •λ¦¬ν–μµλ‹λ‹¤.'
tags: ['Spring', 'MyBatis', 'SQL', 'AES', 'foreach']
category: 'backend'
---

## π’¥ μ‹¤λ¬΄μ—μ„ λ§μ£Όν• MyBatisμ™€ Springμ μ΄μλ“¤

### π”„ λ‹¤μ¤‘ λ¦¬μ¤νΈλ¥Ό MyBatis foreachλ΅ μ²λ¦¬ν•  μ μ—†λ” λ¬Έμ 

- **λ¬Έμ **: λ‘ κ° μ΄μƒμ λ¦¬μ¤νΈλ¥Ό `<foreach>`λ΅ λ™μ‹μ— μ²λ¦¬ν•κ³  μ‹¶μ—μ§€λ§ MyBatisλ” μ΄λ¥Ό μ§€μ›ν•μ§€ μ•μ.
- **ν•΄κ²° λ°©λ²•**:  
  - `Map<String, Object>`λ΅ λ¦¬μ¤νΈλ“¤μ„ λ¬¶μ–΄ ν•λ‚μ νλΌλ―Έν„°λ΅ λ„κΉ€.
  - νΉμ€ ν•λ‚μ `VO` μ•μ— λ¦¬μ¤νΈλ“¤μ„ ν¬ν•¨μ‹μΌ μ²λ¦¬.

### π” AES μ•”νΈν™”λ μ»¬λΌ λΉ„κµ μΏΌλ¦¬ λ¬Έμ 

- **λ¬Έμ **: `aes_decrypt(unhex(column), key)`λ΅ λ³µνΈν™”ν• κ°’μ„ `WHERE` μ΅°κ±΄μ— μ“°λ©΄ μ„±λ¥ μ €ν• λ°μƒ.
- **ν•΄κ²° λ°©λ²•**:  
  - κ°€λ¥ν•λ‹¤λ©΄ λ³µνΈν™” μ—†μ΄ λΉ„κµ κ°€λ¥ν• κ°’(`salt` λλ” ν•΄μ‹κ°’)μ„ λ³„λ„ μ»¬λΌμ— μ €μ¥  
  - μ–΄μ©” μ μ—†λ” κ²½μ° `CAST(...) AS CHAR`λ΅ μ •ν™•ν λ¬Έμμ—΄ λΉ„κµ

```sql
WHERE CAST(aes_decrypt(unhex(encrypted_column), #{key}) AS CHAR(50)) = #{value}
